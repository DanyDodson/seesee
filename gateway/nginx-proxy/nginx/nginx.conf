# events {
# worker_connections 768;
# multi_accept on;
# }
# pid        /tmp/nginx.pid;

# http {

# client_body_temp_path /tmp/client_temp;
# proxy_temp_path       /tmp/proxy_temp_path;
# fastcgi_temp_path     /tmp/fastcgi_temp;
# uwsgi_temp_path       /tmp/uwsgi_temp;
# scgi_temp_path        /tmp/scgi_temp;
upstream client {
  server gateway-web-client:3000;
}

upstream api {
  server services-test-api:7000;
}

upstream auth {
  server services-test-api:7000;
}

server {

  listen 80 default_server;

  # server_name www.seesee.space seesee.space;

  # location / {
  #   try_files $uri /index.html;
  # }
  location / {
    proxy_pass http://client;
  }

  # location /sockjs-node {
  #   proxy_pass http://client;
  #   proxy_http_version 1.1;
  #   proxy_set_header Upgrade $http_upgrade;
  #   proxy_set_header Connection "Upgrade";
  # }

  location /api {
    # rewrite /api/(.*) /$1 break;
    proxy_pass http://api;
  }

  location /auth {
    # rewrite /api/(.*) /$1 break;
    proxy_pass http://auth;
  }

  # ##
  # # Basic Settings
  # ##

  # sendfile on;
  # tcp_nopush on;
  # tcp_nodelay on;
  # keepalive_timeout 65;
  # types_hash_max_size 2048;
  # # server_tokens off;
  # # server_names_hash_bucket_size 64;
  # # server_name_in_redirect off;
  # include /etc/nginx/mime.types;
  # default_type application/octet-stream;
  # ##
  # # SSL Settings
  # ##
  # ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE
  # ssl_prefer_server_ciphers on;
  # ##
  # # Logging Settings
  # ##
  # access_log /var/log/nginx/access.log;
  # error_log /var/log/nginx/error.log;
  # ##
  # # Gzip Settings
  # ##
  # gzip on;
  # gzip_disable "msie6";
  # gzip_vary on;
  # gzip_proxied any;
  # gzip_comp_level 6;
  # gzip_buffers 16 8k;
  # gzip_http_version 1.1;
  # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
  # ##
  # # Virtual Host Configs
  # ##
  # include /etc/nginx/conf.d/*.conf;
  # include /etc/nginx/sites-enabled/*;
}
# }
